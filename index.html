function buildRoute(lat, lng, distance, unit) {
  hasStartedWalking = false;
  
  // ğŸ› ï¸ Set up the directions renderer to suppress markers
  directionsRenderer.setMap(null);
  directionsRenderer.setOptions({
    map: map,
    suppressMarkers: true  // ğŸ‘ˆ Hides A/B/C/D
  });

  let distanceInKm = parseFloat(distance);
  if (unit === 'miles') {
    distanceInKm *= 1.60934; // convert miles to km
  }

  const waypoints = [];
  const numPoints = 6;
  const radiusInKm = distanceInKm / (2 * Math.PI);

  for (let i = 0; i < numPoints; i++) {
    const angle = (i / numPoints) * 2 * Math.PI;
    const dx = radiusInKm * Math.cos(angle);
    const dy = radiusInKm * Math.sin(angle);
    const pointLat = lat + (dy / 111);
    const pointLng = lng + (dx / (111 * Math.cos(lat * Math.PI / 180)));
    waypoints.push({ location: { lat: pointLat, lng: pointLng }, stopover: true });
  }

  const request = {
    origin: { lat, lng },
    destination: { lat, lng },
    travelMode: 'WALKING',
    waypoints,
    optimizeWaypoints: false,
  };

  directionsService.route(request, (result, status) => {
    if (status === 'OK') {
      directionsRenderer.setDirections(result);
      document.getElementById("startNavigation").style.display = "inline-block";
      updateRouteInfo(result.routes[0].legs[0]);
      showNavigationSteps(result.routes[0].legs[0].steps);
    } else {
      alert("Could not generate route.");
    }
  });
}
